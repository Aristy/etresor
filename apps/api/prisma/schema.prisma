generator client { provider = "prisma-client-js" }
datasource db { provider = "postgresql" url = env("DATABASE_URL") }
model Service { id Int @id @default(autoincrement()) code String @unique name String tvaPct Int @default(0) feeFixed Int @default(0) feePct Int @default(0) active Boolean @default(true) createdAt DateTime @default(now()) updatedAt DateTime @updatedAt invoices Invoice[] }
model Invoice { id Int @id @default(autoincrement()) ref String @unique niu String service Service @relation(fields: [serviceId], references: [id]) serviceId Int amount Int tva Int fee Int total Int status Status @default(PENDING) createdAt DateTime @default(now()) updatedAt DateTime @updatedAt payments Payment[] }
model Payment { id Int @id @default(autoincrement()) ref String @unique invoice Invoice @relation(fields: [invoiceId], references: [id]) invoiceId Int method Method msisdn String? amount Int status Status @default(PENDING) tx String? createdAt DateTime @default(now()) updatedAt DateTime @updatedAt }
enum Status { PENDING PAID FAILED CANCELED }
enum Method { MOMO CASH CARD }